<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRU AI Platform | Project Execution Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Source+Sans+3:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="data.js"></script>

    <style type="text/tailwindcss">
        @layer base {
            :root {
                --color-cream: #FDF8F0;
                --color-warm-white: #FFFBF7;
                --color-charcoal: #2D2A26;
                --color-sage: #8B9A7D;
                --color-sage-light: #A8B59A;
                --color-terracotta: #C17B5F;
                --color-terracotta-light: #D99B7A;
                --color-gold: #C9A962;
                --color-stone: #E8E2D9;
                --color-phase0: #9CA3AF;
                --color-phase1: #8B9A7D;
                --color-phase2: #C17B5F;
                --color-phase3: #C9A962;
                --color-phase4: #6B7280;
                --color-phase5: #4B5563;
            }
            body {
                font-family: 'Source Sans 3', sans-serif;
                background-color: var(--color-cream);
                color: var(--color-charcoal);
            }
            h1, h2, h3, h4, .display-font {
                font-family: 'Playfair Display', serif;
            }
        }
        @layer components {
            .glass-card {
                background: rgba(255, 251, 247, 0.85);
                backdrop-filter: blur(12px);
                border: 1px solid rgba(232, 226, 217, 0.8);
                box-shadow: 0 4px 24px rgba(45, 42, 38, 0.06);
            }
            .phase-indicator {
                width: 12px;
                height: 12px;
                border-radius: 50%;
                display: inline-block;
                margin-right: 8px;
            }
            .kanban-card {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            .kanban-card:hover {
                transform: translateY(-4px) scale(1.02);
                box-shadow: 0 12px 32px rgba(45, 42, 38, 0.12);
            }
            .kanban-column {
                min-height: 400px;
                background: linear-gradient(180deg, rgba(232, 226, 217, 0.3) 0%, rgba(232, 226, 217, 0.1) 100%);
                border-radius: 16px;
                padding: 20px;
            }
            .gantt-bar {
                transition: all 0.3s ease;
                cursor: pointer;
            }
            .gantt-bar:hover {
                filter: brightness(1.1);
                transform: scaleY(1.1);
            }
            .today-marker {
                position: absolute;
                top: 0;
                bottom: 0;
                width: 2px;
                background: linear-gradient(180deg, var(--color-terracotta) 0%, transparent 100%);
                z-index: 10;
            }
            .today-label {
                position: absolute;
                top: -24px;
                transform: translateX(-50%);
                background: var(--color-terracotta);
                color: white;
                padding: 2px 8px;
                border-radius: 4px;
                font-size: 0.75rem;
                font-weight: 600;
                white-space: nowrap;
            }
            .stat-card {
                background: linear-gradient(135deg, rgba(255, 251, 247, 0.9) 0%, rgba(253, 248, 240, 0.7) 100%);
                border: 1px solid rgba(139, 154, 125, 0.2);
            }
            .progress-ring {
                transform: rotate(-90deg);
            }
            .milestone-dot {
                transition: all 0.3s ease;
            }
            .milestone-dot:hover {
                transform: scale(1.3);
            }
            .tab-active {
                background: var(--color-sage);
                color: white;
            }
            .animate-fade-in {
                animation: fadeIn 0.6s ease-out forwards;
            }
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .grain-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 1000;
                opacity: 0.03;
                background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            }
            .loading-spinner {
                border: 3px solid rgba(139, 154, 125, 0.3);
                border-radius: 50%;
                border-top: 3px solid #8B9A7D;
                width: 24px;
                height: 24px;
                animation: spin 1s linear infinite;
            }
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            .subtask-bar {
                opacity: 0.7;
                height: 6px !important;
                top: 3px !important;
            }
            .activity-chip {
                display: inline-flex;
                align-items: center;
                gap: 4px;
                font-size: 0.75rem;
                background: rgba(0,0,0,0.05);
                border-radius: 999px;
                padding: 3px 10px;
                color: #555;
            }
        }
    </style>
</head>

<body class="antialiased">
    <div class="grain-overlay"></div>

    <!-- Header -->
    <header class="glass-card sticky top-0 z-50 px-8 py-4">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div
                    class="w-12 h-12 rounded-full bg-gradient-to-br from-sage-400 to-sage-600 flex items-center justify-center">
                    <i class="fas fa-brain text-white text-xl"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-bold text-charcoal tracking-tight">TRU AI Platform</h1>
                    <p class="text-sm text-gray-600">Project Progress Roadmap</p>
                </div>
            </div>
            <div class="flex items-center gap-6">
                <div class="text-right">
                    <p class="text-xs text-gray-500 uppercase tracking-wider">Current Date</p>
                    <p class="text-lg font-semibold text-terracotta" id="currentDate"></p>
                </div>
                <div class="text-right">
                    <p class="text-xs text-gray-500 uppercase tracking-wider">Days to Deadline</p>
                    <p class="text-lg font-semibold text-sage" id="daysRemaining"></p>
                </div>
                <div class="h-10 w-px bg-stone"></div>
                <div class="flex items-center gap-2">
                    <div id="connectionStatus" class="w-3 h-3 rounded-full bg-sage"></div>
                    <span class="text-sm font-medium" id="statusText">Local Data</span>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-8 py-8 space-y-8">

        <!-- Stats Overview -->
        <section class="grid grid-cols-1 md:grid-cols-4 gap-4 animate-fade-in" id="statsSection">
            <!-- Populated by JS -->
        </section>

        <!-- View Toggle -->
        <section class="flex items-center justify-between animate-fade-in" style="animation-delay: 0.1s;">
            <div class="flex items-center gap-2 bg-stone/50 rounded-xl p-1">
                <button onclick="switchView('gantt')" id="btn-gantt"
                    class="px-6 py-2 rounded-lg text-sm font-medium transition-all tab-active">
                    <i class="fas fa-stream mr-2"></i>Gantt Timeline
                </button>
                <button onclick="switchView('kanban')" id="btn-kanban"
                    class="px-6 py-2 rounded-lg text-sm font-medium transition-all hover:bg-white/50">
                    <i class="fas fa-columns mr-2"></i>Kanban Board
                </button>
            </div>
            <div class="flex items-center gap-4 text-sm text-gray-600">
                <div class="flex items-center gap-2">
                    <span class="phase-indicator" style="background: var(--color-phase0)"></span>
                    <span>Completed</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="phase-indicator" style="background: var(--color-phase1)"></span>
                    <span>In Progress</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="phase-indicator" style="background: var(--color-phase4)"></span>
                    <span>Upcoming</span>
                </div>
            </div>
        </section>

        <!-- Gantt View -->
        <section id="ganttView" class="glass-card rounded-3xl p-8 animate-fade-in" style="animation-delay: 0.2s;">
            <div class="mb-6 flex justify-between items-end">
                <div>
                    <h2 class="text-2xl font-bold mb-2 display-font">Project Timeline</h2>
                    <p class="text-gray-600">Visual roadmap &bull; Today marked with <span
                            class="text-terracotta font-semibold">red line</span></p>
                </div>
                <button onclick="loadData()" class="text-sm text-sage hover:underline"><i class="fas fa-sync mr-1"></i>
                    Refresh Data</button>
            </div>

            <div class="relative overflow-x-auto" style="min-width: 1000px;">
                <div id="ganttChart" class="relative">
                    <div class="flex border-b border-stone pb-2 mb-4" id="ganttHeader">
                        <div class="w-52 flex-shrink-0 font-semibold text-sm text-gray-600 pl-4">Phase / Task</div>
                        <div class="flex-1 flex" id="ganttDateHeader">
                            <!-- Date headers generated here -->
                        </div>
                    </div>
                    <div id="ganttBody" class="space-y-1 min-h-[200px]">
                        <!-- Loading State -->
                        <div class="flex flex-col items-center justify-center h-48">
                            <div class="loading-spinner mb-2"></div>
                            <p class="text-gray-500">Loading timeline data...</p>
                        </div>
                    </div>
                    <div id="todayMarker" class="today-marker hidden">
                        <div class="today-label">TODAY</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Kanban View -->
        <section id="kanbanView" class="hidden animate-fade-in">
            <div class="glass-card rounded-3xl p-8">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold mb-2 display-font">Task Board</h2>
                    <p class="text-gray-600">Dynamic view based on Phase status</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-4 gap-6" id="kanbanBoard">
                    <div class="kanban-column" data-status="todo">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-semibold text-gray-700">Upcoming</h3>
                            <span class="bg-gray-200 text-gray-700 px-2 py-1 rounded text-xs font-medium"
                                id="count-todo">0</span>
                        </div>
                        <div class="space-y-3" id="todo-tasks"></div>
                    </div>
                    <div class="kanban-column" data-status="progress">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-semibold text-terracotta">In Progress</h3>
                            <span class="bg-terracotta/20 text-terracotta px-2 py-1 rounded text-xs font-medium"
                                id="count-progress">0</span>
                        </div>
                        <div class="space-y-3" id="progress-tasks"></div>
                    </div>
                    <div class="kanban-column" data-status="review">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-semibold text-gold">Review</h3>
                            <span class="bg-gold/20 text-gold px-2 py-1 rounded text-xs font-medium"
                                id="count-review">0</span>
                        </div>
                        <div class="space-y-3" id="review-tasks"></div>
                    </div>
                    <div class="kanban-column" data-status="done">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-semibold text-sage">Completed</h3>
                            <span class="bg-sage/20 text-sage px-2 py-1 rounded text-xs font-medium"
                                id="count-done">0</span>
                        </div>
                        <div class="space-y-3" id="done-tasks"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Task Details Section -->
        <section class="animate-fade-in" style="animation-delay: 0.3s;">
            <div class="flex items-center gap-3 mb-6">
                <div class="h-8 w-1.5 bg-terracotta rounded-full"></div>
                <h2 class="text-2xl font-bold display-font">Project Roadmap & Task Details</h2>
            </div>
            <div id="taskDetailsGrid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Populated by JS -->
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="max-w-7xl mx-auto px-8 py-6 text-center text-sm text-gray-500">
        <p>TRU AI Platform &bull; Co-op Project Execution Plan &bull; Prepared by Gursahib Singh</p>
    </footer>

    <!-- Scripts -->
    <script>
        // Global State
        const appState = {
            phases: [],
            startDate: new Date('2026-01-28'),
            endDate: new Date('2026-04-15')
        };

        // --- LOAD DATA FROM LOCAL JS ---

        function loadData() {
            try {
                document.getElementById('statusText').innerText = "Loading...";

                const data = window.projectData;
                if (!data) throw new Error('Failed to find projectData in data.js');

                if (data.phases && data.phases.length > 0) {
                    appState.phases = data.phases;
                    if (data.projectInfo) {
                        appState.startDate = new Date(data.projectInfo.startDate);
                        appState.endDate = new Date(data.projectInfo.endDate);
                    } else {
                        const dates = data.phases.flatMap(p => [new Date(p.start), new Date(p.end)]);
                        appState.startDate = new Date(Math.min(...dates));
                        appState.endDate = new Date(Math.max(...dates));
                    }
                } else {
                    appState.phases = [];
                }

                updateUI();

                document.getElementById('connectionStatus').className = 'w-3 h-3 rounded-full bg-sage';
                document.getElementById('statusText').innerText = "Local Data";

            } catch (error) {
                console.error("Error loading data:", error);
                document.getElementById('connectionStatus').className = 'w-3 h-3 rounded-full bg-red-500';
                document.getElementById('statusText').innerText = "Error";
            }
        }

        // --- UI RENDER LOGIC ---

        function updateUI() {
            initHeader();
            generateStats();
            generateGantt();
            generateKanban();
            generateFocusSection();
        }

        // Helper: Date Difference
        function getDaysDiff(start, end) {
            const oneDay = 24 * 60 * 60 * 1000;
            return Math.round((end - start) / oneDay) + 1;
        }

        // Helper: Format Date
        function formatDate(date) {
            const options = { month: 'short', day: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }

        // 1. Header Logic
        function initHeader() {
            const today = new Date();
            const deadline = appState.endDate;
            const daysLeft = Math.ceil((deadline - today) / (1000 * 60 * 60 * 24));

            document.getElementById('currentDate').textContent = today.toLocaleDateString('en-US', {
                month: 'long', day: 'numeric', year: 'numeric'
            });
            document.getElementById('daysRemaining').textContent = daysLeft > 0 ? daysLeft : 'Due';
        }

        // 2. Stats Logic
        function generateStats() {
            const phases = appState.phases;
            const stats = {
                total: phases.length,
                completed: phases.filter(p => p.status === 'completed' || p.status === 'milestone').length,
                progress: phases.filter(p => p.status === 'progress').length,
                upcoming: phases.filter(p => p.status === 'todo').length
            };

            const pct = stats.total > 0 ? Math.round((stats.completed / stats.total) * 100) : 0;

            const html = `
                <div class="stat-card rounded-2xl p-6">
                    <div class="flex items-start justify-between">
                        <div><p class="text-sm text-gray-500 mb-1">Total Phases</p><p class="text-3xl font-bold text-charcoal">${stats.total}</p></div>
                        <div class="w-10 h-10 rounded-lg bg-sage/20 flex items-center justify-center"><i class="fas fa-layer-group text-sage"></i></div>
                    </div>
                </div>
                <div class="stat-card rounded-2xl p-6">
                    <div class="flex items-start justify-between">
                        <div><p class="text-sm text-gray-500 mb-1">Completed</p><p class="text-3xl font-bold text-sage">${stats.completed}</p></div>
                        <div class="w-10 h-10 rounded-lg bg-sage/20 flex items-center justify-center"><i class="fas fa-check-circle text-sage"></i></div>
                    </div>
                    <div class="mt-3 w-full bg-gray-200 rounded-full h-1.5">
                        <div class="bg-sage h-1.5 rounded-full transition-all duration-700" style="width: ${pct}%"></div>
                    </div>
                    <p class="text-xs text-gray-400 mt-1">${pct}% complete</p>
                </div>
                <div class="stat-card rounded-2xl p-6">
                    <div class="flex items-start justify-between">
                        <div><p class="text-sm text-gray-500 mb-1">In Progress</p><p class="text-3xl font-bold text-terracotta">${stats.progress}</p></div>
                        <div class="w-10 h-10 rounded-lg bg-terracotta/20 flex items-center justify-center"><i class="fas fa-spinner text-terracotta"></i></div>
                    </div>
                </div>
                <div class="stat-card rounded-2xl p-6">
                    <div class="flex items-start justify-between">
                        <div><p class="text-sm text-gray-500 mb-1">Upcoming</p><p class="text-3xl font-bold text-gold">${stats.upcoming}</p></div>
                        <div class="w-10 h-10 rounded-lg bg-gold/20 flex items-center justify-center"><i class="fas fa-clock text-gold"></i></div>
                    </div>
                </div>
            `;
            document.getElementById('statsSection').innerHTML = html;
        }

        // 3. Gantt Chart (with subtasks)
        function generateGantt() {
            const container = document.getElementById('ganttBody');
            const headerRow = document.getElementById('ganttDateHeader');

            if (appState.phases.length === 0) {
                container.innerHTML = '<div class="p-4 text-center text-gray-500">No phase data available. Please check data.json.</div>';
                return;
            }

            const totalDays = getDaysDiff(appState.startDate, appState.endDate);
            if (totalDays <= 0) return;

            // Header
            let currentDate = new Date(appState.startDate);
            let headerHTML = '';
            let weekCount = 0;
            const endDatePlus = new Date(appState.endDate);
            endDatePlus.setDate(endDatePlus.getDate() + 7);

            while (currentDate <= endDatePlus) {
                const weekWidth = (7 / totalDays) * 100;
                const isEven = weekCount % 2 === 0;
                headerHTML += `<div class="flex-shrink-0 text-xs text-gray-500 text-center py-2 ${isEven ? 'bg-gray-50/50' : ''}" style="width: ${weekWidth}%">${formatDate(currentDate)}</div>`;
                currentDate.setDate(currentDate.getDate() + 7);
                weekCount++;
            }
            headerRow.innerHTML = headerHTML;

            // Bars (phases + subtasks)
            let ganttHTML = '';
            appState.phases.forEach((phase) => {
                const phaseStart = new Date(phase.start);
                const phaseEnd = new Date(phase.end);
                const startOffset = getDaysDiff(appState.startDate, phaseStart);
                const duration = getDaysDiff(phaseStart, phaseEnd);

                const leftPos = (startOffset / totalDays) * 100;
                const width = (duration / totalDays) * 100;
                const isCompleted = phase.status === 'completed' || phase.status === 'milestone';
                const isActive = phase.status === 'progress';

                ganttHTML += `
                    <div class="flex items-center group">
                        <div class="w-52 flex-shrink-0 pr-4">
                            <p class="text-sm font-semibold text-gray-800">${phase.shortName}</p>
                            <p class="text-xs text-gray-500">${formatDate(phaseStart)} – ${formatDate(phaseEnd)}</p>
                        </div>
                        <div class="flex-1 relative h-12 bg-gray-100/50 rounded-lg overflow-hidden">
                            <div class="gantt-bar absolute h-8 top-2 rounded-lg flex items-center px-3 text-xs font-medium text-white shadow-lg ${isActive ? 'ring-2 ring-terracotta ring-offset-2' : ''}"
                                 style="left: ${leftPos}%; width: max(${width}%, 20px); background-color: ${phase.color};"
                                 title="${phase.name}: ${phase.description}">
                                ${isCompleted ? '<i class="fas fa-check mr-1"></i>' : ''}
                                ${isActive ? '<i class="fas fa-spinner fa-spin mr-1"></i>' : ''}
                                <span class="truncate">${duration} days</span>
                            </div>
                        </div>
                    </div>
                `;

                // Render subtasks
                if (phase.subTasks && phase.subTasks.length > 0) {
                    phase.subTasks.forEach(sub => {
                        const subStart = new Date(sub.start);
                        const subEnd = new Date(sub.end);
                        const subOffset = getDaysDiff(appState.startDate, subStart);
                        const subDuration = getDaysDiff(subStart, subEnd);
                        const subLeft = (subOffset / totalDays) * 100;
                        const subWidth = (subDuration / totalDays) * 100;

                        ganttHTML += `
                            <div class="flex items-center group">
                                <div class="w-52 flex-shrink-0 pr-4 pl-6">
                                    <p class="text-xs text-gray-500 italic"><i class="fas fa-caret-right mr-1 text-gray-400"></i>${sub.name}</p>
                                </div>
                                <div class="flex-1 relative h-6 rounded-lg overflow-hidden">
                                    <div class="gantt-bar subtask-bar absolute rounded-full"
                                         style="left: ${subLeft}%; width: max(${subWidth}%, 12px); background-color: ${phase.color}; opacity: 0.55;"
                                         title="${sub.name}: ${formatDate(subStart)} – ${formatDate(subEnd)}">
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                }
            });
            container.innerHTML = ganttHTML;

            // Today Marker
            const today = new Date();
            const daysPassed = getDaysDiff(appState.startDate, today);
            const todayPos = (daysPassed / totalDays) * 100;
            const marker = document.getElementById('todayMarker');

            if (todayPos > 0 && todayPos < 100) {
                marker.style.left = `calc(208px + ((100% - 208px) * ${todayPos / 100}))`;
                marker.classList.remove('hidden');
            } else {
                marker.classList.add('hidden');
            }
        }

        // 4. Kanban
        function generateKanban() {
            const columns = {
                todo: document.getElementById('todo-tasks'),
                progress: document.getElementById('progress-tasks'),
                review: document.getElementById('review-tasks'),
                done: document.getElementById('done-tasks')
            };

            Object.values(columns).forEach(col => col.innerHTML = '');
            const counts = { todo: 0, progress: 0, review: 0, done: 0 };

            appState.phases.forEach(phase => {
                let status = phase.status;
                if (status === 'milestone') status = 'done';
                if (status === 'completed') status = 'done';
                if (!columns[status]) status = 'todo';

                const activities = phase.activities || [];
                const activitiesHTML = activities.length > 0
                    ? `<div class="flex flex-wrap gap-1 mt-2">${activities.map(a => `<span class="activity-chip">${a}</span>`).join('')}</div>`
                    : '';

                const deliverables = phase.deliverables || [];
                const deliverablesHTML = deliverables.length > 0
                    ? `<div class="mt-2 space-y-1">${deliverables.map(d => `<div class="flex items-start gap-2 text-xs text-gray-600"><i class="fas fa-check-circle text-sage/60 mt-0.5 flex-shrink-0"></i><span>${d}</span></div>`).join('')}</div>`
                    : '';

                const card = document.createElement('div');
                card.className = 'kanban-card bg-white rounded-xl p-4 shadow-sm border border-stone';

                card.innerHTML = `
                    <div class="flex items-start gap-3">
                        <div class="w-3 h-3 rounded-full mt-1.5 flex-shrink-0" style="background-color: ${phase.color}"></div>
                        <div class="flex-1">
                            <p class="text-sm font-semibold text-gray-800 mb-0.5">${phase.shortName}</p>
                            <p class="text-xs text-gray-500 mb-1">${formatDate(new Date(phase.start))} – ${formatDate(new Date(phase.end))}</p>
                            <p class="text-xs text-gray-600 leading-relaxed">${phase.description}</p>
                            ${deliverablesHTML}
                            ${activitiesHTML}
                        </div>
                    </div>
                `;
                columns[status].appendChild(card);
                counts[status]++;
            });

            Object.keys(counts).forEach(key => {
                document.getElementById(`count-${key}`).textContent = counts[key];
            });
        }

        // 5. Task Details Section (All Phases)
        function generateFocusSection() {
            const container = document.getElementById('taskDetailsGrid');
            if (!container) return;

            let html = '';
            appState.phases.forEach((phase) => {
                const pStart = new Date(phase.start);
                const pEnd = new Date(phase.end);
                const duration = getDaysDiff(pStart, pEnd);
                const isCompleted = phase.status === 'completed' || phase.status === 'milestone';
                const isActive = phase.status === 'progress';

                html += `
                    <div class="glass-card rounded-2xl overflow-hidden border-t-4" style="border-top-color: ${phase.color}">
                        <div class="p-6">
                            <div class="flex justify-between items-start mb-4">
                                <div class="flex items-center gap-3">
                                    <span class="w-8 h-8 rounded-lg flex items-center justify-center text-white" style="background-color: ${phase.color}">
                                        <i class="fas ${getIconForPhase(phase.id)} text-xs"></i>
                                    </span>
                                    <div>
                                        <h3 class="font-bold text-lg">${phase.name}</h3>
                                        <p class="text-xs text-gray-500 font-medium uppercase tracking-wider">${formatDate(pStart)} – ${formatDate(pEnd)} &bull; ${duration} days</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 rounded text-[10px] font-bold uppercase tracking-tight ${isCompleted ? 'bg-sage/20 text-sage' : (isActive ? 'bg-terracotta/20 text-terracotta' : 'bg-gray-100 text-gray-500')}">
                                    ${phase.status}
                                </span>
                            </div>

                            <div class="space-y-4">
                                <div>
                                    <div class="flex items-center gap-2 text-charcoal font-bold text-sm mb-1 uppercase tracking-wide">
                                        <i class="fas fa-bullseye text-xs opacity-60"></i>
                                        <span>What I am doing</span>
                                    </div>
                                    <p class="text-gray-600 text-sm leading-relaxed pl-5 border-l border-stone/50 ml-1.5">${phase.what || phase.description}</p>
                                </div>

                                <div>
                                    <div class="flex items-center gap-2 text-charcoal font-bold text-sm mb-1 uppercase tracking-wide">
                                        <i class="fas fa-tools text-xs opacity-60"></i>
                                        <span>How I am doing it</span>
                                    </div>
                                    <p class="text-gray-600 text-sm leading-relaxed pl-5 border-l border-stone/50 ml-1.5">${phase.how || 'Implementing planned activities and subtasks to achieve milestone deliverables.'}</p>
                                </div>
                            </div>

                            <div class="mt-6 pt-4 border-t border-stone/30 flex flex-wrap gap-2">
                                ${(phase.deliverables || []).map(d => `<span class="activity-chip"><i class="fas fa-check-circle text-sage/70"></i>${d}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function getIconForPhase(id) {
            const icons = ['fa-layer-group', 'fa-leaf', 'fa-users-cog', 'fa-chart-bar', 'fa-graduation-cap', 'fa-rocket'];
            return icons[id] || 'fa-project-diagram';
        }

        // View Switcher
        function switchView(view) {
            const ganttBtn = document.getElementById('btn-gantt');
            const kanbanBtn = document.getElementById('btn-kanban');

            const ganttView = document.getElementById('ganttView');
            const kanbanView = document.getElementById('kanbanView');

            [ganttBtn, kanbanBtn].forEach(btn => {
                btn.className = 'px-6 py-2 rounded-lg text-sm font-medium transition-all hover:bg-white/50';
            });
            [ganttView, kanbanView].forEach(v => v.classList.add('hidden'));

            if (view === 'gantt') {
                ganttBtn.classList.add('tab-active');
                ganttBtn.classList.remove('hover:bg-white/50');
                ganttView.classList.remove('hidden');
            } else if (view === 'kanban') {
                kanbanBtn.classList.add('tab-active');
                kanbanBtn.classList.remove('hover:bg-white/50');
                kanbanView.classList.remove('hidden');
            }
        }

        // Initialize App
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
        });
    </script>
</body>

</html>